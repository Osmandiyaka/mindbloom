<div class="ou-members-table">
    <mb-table class="ou-members-table__table"
        [columns]="columns"
        [rows]="pagedRows()"
        [rowKey]="rowKey"
        [isLoading]="isLoading()"
        [isError]="isError()"
        [emptyState]="emptyState()"
        [isFiltered]="isFiltered()"
        (emptyAction)="handleEmptyAction($event)"
        (cellClick)="handleCellClick($event)">
        <ng-template mbTableActions let-row>
            <button
                type="button"
                class="ou-row-action"
                #rowActionsOrigin
                [attr.aria-label]="'Open actions for ' + (row.name || 'member')"
                (click)="toggleRowMenu(row.id, $event)"
            >â‹¯</button>
            <mb-popover
                [open]="actionsMenuOpenId() === row.id"
                [origin]="rowActionsOrigin"
                [hasBackdrop]="true"
                [panelClass]="['mb-popover-panel', 'mb-popover-panel--above-modal', 'ou-row-actions-menu__panel']"
                (closed)="closeRowMenu()"
            >
                <div class="ou-row-actions-menu" role="menu">
                    <button type="button" class="ou-row-actions-menu__item"
                        (click)="viewMemberProfile(row)">
                        View profile
                    </button>
                    <button type="button"
                        class="ou-row-actions-menu__item ou-row-actions-menu__item--danger"
                        (click)="closeRowMenu(); confirmRemove(row)">
                        Remove from unit
                    </button>
                </div>
            </mb-popover>
        </ng-template>
    </mb-table>
</div>

<div class="ou-members-table__footer" *ngIf="filteredRows().length">
    <div class="ou-members-table__summary">{{ tableSummary() }}</div>
    <div class="ou-members-table__paging">
        <mb-button size="sm" variant="tertiary" [disabled]="pageIndex() === 1"
            (click)="prevPage()">Prev</mb-button>
        <span>Page {{ pageIndex() }} of {{ pageCount() }}</span>
        <mb-button size="sm" variant="tertiary" [disabled]="pageIndex() === pageCount()"
            (click)="nextPage()">Next</mb-button>
    </div>
</div>
