<div class="role-list-container">
    <!-- Header -->
    <div class="page-header">
        <div class="header-content">
            <h1>Roles & Permissions</h1>
            <p class="subtitle">Manage user roles and their permissions</p>
        </div>
        <div class="header-actions">
            <button class="btn btn-primary" routerLink="/roles/create">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                Create Role
            </button>
        </div>
    </div>

    <!-- Loading State -->
    @if (loading()) {
    <div class="loading-state">
        <div class="spinner"></div>
        <p>Loading roles...</p>
    </div>
    }

    <!-- Error State -->
    @if (error()) {
    <div class="error-state">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="8" x2="12" y2="12"></line>
            <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <p>{{ error() }}</p>
        <button class="btn btn-secondary" (click)="loadRoles()">Retry</button>
    </div>
    }

    <!-- Roles Grid -->
    @if (!loading() && !error()) {
    <div class="roles-grid">
        @for (role of roles(); track role.id) {
        <div class="role-card" [class.system-role]="role.isSystemRole">
            <!-- Role Header -->
            <div class="role-header">
                <div class="role-icon">
                    @if (role.isSystemRole) {
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                    </svg>
                    } @else {
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                        <circle cx="9" cy="7" r="4"></circle>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                    </svg>
                    }
                </div>
                <div class="role-title">
                    <h3>{{ role.name }}</h3>
                    @if (role.isSystemRole) {
                    <span class="badge badge-system">System</span>
                    }
                </div>
            </div>

            <!-- Role Description -->
            <p class="role-description">{{ role.description || 'No description provided' }}</p>

            <!-- Role Stats -->
            <div class="role-stats">
                <div class="stat-item">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path d="M9 11l3 3L22 4"></path>
                        <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                    </svg>
                    <span>{{ getPermissionCount(role) }} permissions</span>
                </div>
            </div>

            <!-- Actions -->
            <div class="role-actions">
                <button class="btn btn-secondary btn-sm" [routerLink]="['/roles', role.id]">
                    View Details
                </button>
                @if (!role.isSystemRole) {
                <button class="btn btn-secondary btn-sm" [routerLink]="['/roles', role.id, 'edit']">
                    Edit
                </button>
                <button class="btn btn-danger btn-sm" (click)="confirmDelete(role)">
                    Delete
                </button>
                }
            </div>
        </div>
        }
    </div>

    <!-- Empty State -->
    @if (roles().length === 0) {
    <div class="empty-state">
        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="1.5">
            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
            <circle cx="9" cy="7" r="4"></circle>
            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
        </svg>
        <h3>No roles found</h3>
        <p>Create your first custom role to get started</p>
        <button class="btn btn-primary" routerLink="/roles/create">Create Role</button>
    </div>
    }
    }

    <!-- Delete Confirmation Modal -->
    @if (showDeleteConfirm()) {
    <div class="modal-overlay" (click)="cancelDelete()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <div class="modal-header">
                <h2>Delete Role</h2>
                <button class="modal-close" (click)="cancelDelete()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete the role <strong>{{ roleToDelete()?.name }}</strong>?</p>
                <p class="text-muted">This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" (click)="cancelDelete()">Cancel</button>
                <button class="btn btn-danger" (click)="deleteRole()">Delete Role</button>
            </div>
        </div>
    </div>
    }
</div>