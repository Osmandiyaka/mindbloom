<div class="global-toolbar">
    <div class="toolbar-left">
        <!-- Navigation Toggle (mobile vs desktop) -->
        <ng-container *ngIf="isMobile; else desktopToggle">
            <button class="toolbar-btn toggle-btn hamburger-btn" (click)="onNavToggle()"
                [attr.aria-controls]="'app-sidebar'" [attr.aria-expanded]="navOpen"
                [attr.aria-label]="navOpen ? 'Close navigation' : 'Open navigation'">
                <span class="hamburger" [class.open]="navOpen">
                    <span></span><span></span><span></span>
                </span>
            </button>
        </ng-container>
        <ng-template #desktopToggle>
            <button class="toolbar-btn toggle-btn" (click)="onNavToggle()"
                [appTooltip]="collapsed ? 'Expand navigation' : 'Collapse navigation'" tooltipPosition="bottom"
                [attr.aria-pressed]="collapsed" aria-label="Toggle navigation">
                <span class="chevron">{{ collapsed ? '›' : '‹' }}</span>
            </button>
        </ng-template>

        <!-- Dashboard Button -->
        <button class="toolbar-btn hide-compact" (click)="onDashboardClick()" [appTooltip]="'Dashboard'"
            tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('dashboard')"></span>
        </button>

        <!-- Students Button -->
        <button class="toolbar-btn hide-compact" (click)="onStudentsClick()" [appTooltip]="'Students'"
            tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('students')"></span>
        </button>

        <!-- Calendar Button -->
        <button class="toolbar-btn hide-compact" (click)="onCalendarClick()" [appTooltip]="'Calendar'"
            tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('calendar')"></span>
        </button>

        <!-- Reports Button -->
        <button class="toolbar-btn hide-compact" (click)="onReportsClick()" [appTooltip]="'Reports'"
            tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('reports')"></span>
        </button>

        <div class="toolbar-divider hide-compact"></div>

        <!-- Marketplace Button -->
        <button class="toolbar-btn marketplace-btn hide-compact" (click)="onMarketplaceClick()"
            [appTooltip]="'Plugin Marketplace'" tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('marketplace')"></span>
        </button>

        <div class="toolbar-divider hide-compact"></div>

        <!-- Notifications Button -->
        <button class="toolbar-btn hide-compact" (click)="onNotificationsClick()" [appTooltip]="'Notifications'"
            tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('alarm')"></span>
        </button>

        <!-- Messages Button -->
        <button class="toolbar-btn hide-compact" (click)="onMessagesClick()" [appTooltip]="'Messages'"
            tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('inbox')"></span>
        </button>
    </div>

    <div class="toolbar-center">
        <!-- School Name -->
        <div class="school-name">
            <span class="icon" [innerHTML]="icon('academics')"></span>
            <span class="school-name-text">{{ tenantName() }}</span>
        </div>

        <!-- Global Search Bar -->
        <app-search-input class="search-container" placeholder="Search..." (search)="onSearch($event)">
        </app-search-input>
    </div>

    <div class="toolbar-right">
        <!-- Theme Selector -->
        <app-theme-selector />

        <div class="toolbar-divider"></div>

        <!-- Logout Button -->
        <button class="logout-btn" (click)="onLogout()" [appTooltip]="'Logout'" tooltipPosition="bottom">
            <span class="icon" [innerHTML]="icon('logout')"></span>
            <span>Logout</span>
        </button>
    </div>
</div>